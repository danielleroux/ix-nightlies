{"version":3,"names":["timePickerCss","IxTimePickerStyle0","TimePicker","DateTime","now","toFormat","this","format","undefined","watchTimePropHandler","newValue","_time","fromFormat","isValid","Error","componentWillLoad","time","console","error","invalidReason","invalidExplanation","_timeRef","includes","formatTime","hour","minute","second","split","_formattedTime","onInternalTimeChange","timeChange","emit","timeUpdate","unit","value","maxValue","endOf","get","set","changeTimeReference","plus","getCurrentTime","render","timepickerInformation","placeholder","hidden","showHour","showMinutes","showSeconds","filter","item","h","Host","key","standaloneAppearance","corners","class","slot","variant","textTime","map","descriptor","index","columns","size","onClick","ghost","icon","name","type","onKeyDown","e","preventDefault","onChange","inputElement","target","toString","minus","length","button","timeSelect","done","textSelectTime"],"sources":["src/components/time-picker/time-picker.scss?tag=ix-time-picker&encapsulation=shadow","src/components/time-picker/time-picker.tsx"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2023 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n@import 'common-variables';\n@import 'mixins/shadow-dom/component';\n@import 'components/form/input';\n\n:host {\n  @include ix-component;\n  @import 'legacy/components/forms';\n\n  display: block;\n  position: relative;\n  width: 22rem;\n\n  @media (max-width: 576px) {\n    .clock {\n      padding: 1.5rem 0;\n    }\n\n    .header {\n      height: $medium-control-height !important;\n    }\n  }\n\n  @media (min-width: 576px) {\n    .clock {\n      padding: 4.25rem 0;\n    }\n\n    .header {\n      height: $large-control-height !important;\n    }\n  }\n\n  .header {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: $large-control-height;\n  }\n\n  .flex {\n    display: flex;\n  }\n\n  .clock {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  input,\n  .time-reference {\n    width: 2.625rem;\n    height: $large-space;\n    text-align: center;\n    margin-top: 0.25rem;\n    margin-bottom: 0.25rem;\n\n    /* Chrome, Safari, Edge, Opera */\n    &::-webkit-outer-spin-button,\n    &::-webkit-inner-spin-button {\n      -webkit-appearance: none;\n      margin: 0 0.3125rem;\n    }\n\n    /* Firefox */\n    &[type='number'] {\n      -moz-appearance: textfield;\n    }\n  }\n\n  .form-control[type='number'] {\n    text-align: center;\n  }\n\n  .columns {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: space-around;\n  }\n\n  .column-seperator {\n    display: flex;\n    align-items: center;\n    margin: 0 $tiny-space;\n  }\n\n  .button {\n    display: flex;\n    justify-content: flex-end;\n  }\n\n  .default-space {\n    margin-left: $default-space;\n  }\n\n  .text-align {\n    text-align: center;\n  }\n\n  .hidden {\n    display: none;\n  }\n\n  .time-reference {\n    margin-top: 0.5rem;\n    margin-bottom: 0.5rem;\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2023 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport {\n  Component,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Method,\n  Prop,\n  State,\n  Watch,\n} from '@stencil/core';\nimport { DateTime } from 'luxon';\nimport { DateTimeCardCorners } from '../date-time-card/date-time-card';\n\nexport type TimePickerCorners = DateTimeCardCorners;\n\ninterface TimePickerDescriptor {\n  unit: 'hour' | 'minute' | 'second';\n  placeholder: string;\n  hidden: boolean;\n}\n\ninterface TimeOutputFormat {\n  hour: string;\n  minute: string;\n  second: string;\n}\n\n@Component({\n  tag: 'ix-time-picker',\n  styleUrl: 'time-picker.scss',\n  shadow: true,\n})\nexport class TimePicker {\n  /**\n   * Format of time string\n   * See {@link \"https://moment.github.io/luxon/#/formatting?id=table-of-tokens\"} for all available tokens.\n   *\n   * @since 1.1.0\n   */\n  @Prop() format: string = 'TT';\n\n  /**\n   * Corner style\n   */\n  @Prop() corners: TimePickerCorners = 'rounded';\n\n  /**\n   * Controls the visual presentation and styling of the component when it is displayed as a standalone element\n   */\n  @Prop() standaloneAppearance: boolean = true;\n\n  /**\n   * @deprecated Not supported since 2.0.0.\n   */\n  @Prop() individual: boolean = true;\n\n  /**\n   * Show hour input\n   */\n  @Prop() showHour = true;\n\n  /**\n   * Show minutes input\n   */\n  @Prop() showMinutes = true;\n\n  /**\n   * Show seconds input\n   */\n  @Prop() showSeconds = true;\n\n  /**\n   * Select time with format string\n   * Format has to match the `format` property.\n   *\n   * @since 1.1.0\n   */\n  @Prop() time: string = DateTime.now().toFormat(this.format);\n\n  @Watch('time')\n  watchTimePropHandler(newValue: string) {\n    this._time = DateTime.fromFormat(newValue, this.format);\n    if (!this._time.isValid) {\n      throw new Error('Format is not supported or not correct');\n    }\n  }\n\n  /**\n   * Show time reference input\n   *\n   * @since 1.1.0 time reference is default aligned with format tt\n   * @deprecated Since 2.0.0 time reference will be displayed depending on format.\n   */\n  // eslint-disable-next-line @stencil-community/strict-mutable\n  @Prop({ mutable: true }) showTimeReference?: boolean = undefined;\n\n  /**\n   * Set time reference\n   */\n  @Prop() timeReference: 'AM' | 'PM' | undefined;\n\n  /**\n   * Text of date select button\n   *\n   * @since 1.1.0\n   */\n  @Prop() textSelectTime = 'Done';\n\n  /**\n   * Text for top label\n   *\n   * @since 2.1.0\n   */\n  @Prop() textTime: string = 'Time';\n\n  /**\n   * Time event\n   */\n  @Event() timeSelect: EventEmitter<string>;\n\n  /**\n   * Time event\n   * @deprecated Will be removed in 3.0.0. Use `time-select` event.\n   */\n  @Event() done: EventEmitter<string>;\n\n  /**\n   * Time change event\n   */\n  @Event() timeChange: EventEmitter<string>;\n\n  @State() private _time: DateTime;\n  @State() private _timeRef: 'AM' | 'PM' | undefined;\n  @State() private _formattedTime: TimeOutputFormat;\n\n  componentWillLoad() {\n    this._time = DateTime.fromFormat(this.time, this.format);\n\n    if (!this._time.isValid) {\n      console.error(\n        `Invalid time format. The configured format does not match the format of the passed time. ${this._time.invalidReason}: ${this._time.invalidExplanation}`\n      );\n      return;\n    }\n\n    this._timeRef = this.format.includes('a')\n      ? (DateTime.fromFormat(this.time, this.format).toFormat('a') as\n          | 'AM'\n          | 'PM')\n      : undefined;\n    this.formatTime();\n  }\n\n  @Watch('_time')\n  formatTime() {\n    const [hour, minute, second] = this._time\n      .toFormat(this.format)\n      .split(' ')[0]\n      .split(':');\n\n    this._formattedTime = {\n      hour: hour,\n      minute: minute,\n      second: second,\n    };\n  }\n\n  @Watch('_time')\n  onInternalTimeChange() {\n    this.timeChange.emit(this._time.toFormat(this.format));\n    if (this._timeRef) this._timeRef = this._time.toFormat('a') as 'AM' | 'PM';\n  }\n\n  timeUpdate(unit: 'hour' | 'minute' | 'second', value: number): number {\n    let maxValue = DateTime.now().endOf('day').get(unit);\n\n    if (this._timeRef === 'PM' && unit === 'hour') value += 12;\n    if (this._timeRef === 'AM' && unit === 'hour') maxValue = 12;\n\n    if (value > maxValue) {\n      value = maxValue;\n    } else if (value < 0) {\n      value = 0;\n    }\n\n    this._time = this._time.set({\n      [unit]: value,\n    });\n    return value;\n  }\n\n  changeTimeReference() {\n    this._timeRef = this._timeRef === 'AM' ? 'PM' : 'AM';\n\n    if (!this._time.toFormat('a').includes(this._timeRef)) {\n      this._time = this._time.plus({\n        hour: 12,\n      });\n    }\n  }\n\n  /**\n   * Get the current time based on the wanted format\n   */\n  @Method()\n  async getCurrentTime() {\n    return this._time.toFormat(this.format);\n  }\n\n  render() {\n    let timepickerInformation: TimePickerDescriptor[] = [\n      {\n        unit: 'hour',\n        placeholder: 'HH',\n        hidden: !this.showHour,\n      },\n      {\n        unit: 'minute',\n        placeholder: 'MM',\n        hidden: !this.showMinutes,\n      },\n      {\n        unit: 'second',\n        placeholder: 'SS',\n        hidden: !this.showSeconds,\n      },\n    ];\n\n    timepickerInformation = timepickerInformation.filter(\n      (item) => !item.hidden\n    );\n\n    return (\n      <Host>\n        <ix-date-time-card\n          standaloneAppearance={this.standaloneAppearance}\n          corners={this.corners}\n        >\n          <div class=\"header\" slot=\"header\">\n            <ix-typography variant=\"default-title\">\n              {this.textTime || 'Time'}\n            </ix-typography>\n          </div>\n          <div class=\"clock\">\n            {timepickerInformation.map((descriptor, index: number) => (\n              <div class=\"flex\">\n                <div class={{ columns: true, hidden: descriptor.hidden }}>\n                  <ix-icon-button\n                    size=\"16\"\n                    onClick={() =>\n                      (this._time = this._time.plus({\n                        [descriptor.unit]: 1,\n                      }))\n                    }\n                    ghost\n                    icon=\"chevron-up\"\n                    variant=\"primary\"\n                    class=\"arrows\"\n                  ></ix-icon-button>\n\n                  <input\n                    class=\"form-control\"\n                    name={descriptor.unit}\n                    type=\"number\"\n                    placeholder={descriptor.placeholder}\n                    value={\n                      this._formattedTime\n                        ? this._formattedTime[descriptor.unit]\n                        : null\n                    }\n                    onKeyDown={(e) => {\n                      if (e.key !== 'ArrowUp' && e.key !== 'ArrowDown') return;\n\n                      const value = e.key === 'ArrowUp' ? 1 : -1;\n                      this._time = this._time.plus({\n                        [descriptor.unit]: value,\n                      });\n                      e.preventDefault();\n                    }}\n                    onChange={(e: any) => {\n                      let inputElement = e.target as HTMLInputElement;\n                      inputElement.value = this.timeUpdate(\n                        descriptor.unit,\n                        +inputElement.value\n                      ).toString();\n                    }}\n                  ></input>\n\n                  <ix-icon-button\n                    size=\"16\"\n                    onClick={() =>\n                      (this._time = this._time.minus({\n                        [descriptor.unit]: 1,\n                      }))\n                    }\n                    ghost\n                    icon=\"chevron-down\"\n                    variant=\"primary\"\n                    class=\"arrows\"\n                  ></ix-icon-button>\n                </div>\n\n                {index !== timepickerInformation.length - 1 && (\n                  <div\n                    class={{\n                      'column-seperator': true,\n                      hidden: descriptor.hidden,\n                    }}\n                  >\n                    :\n                  </div>\n                )}\n              </div>\n            ))}\n\n            <div\n              class={{\n                columns: true,\n                'default-space': true,\n                hidden: this._timeRef === undefined,\n              }}\n            >\n              <ix-icon-button\n                size=\"16\"\n                onClick={() => this.changeTimeReference()}\n                ghost\n                icon=\"chevron-up\"\n                variant=\"primary\"\n                class=\"arrows\"\n              ></ix-icon-button>\n              <div class=\"time-reference\">{this._timeRef}</div>\n              <ix-icon-button\n                size=\"16\"\n                onClick={() => this.changeTimeReference()}\n                ghost\n                icon=\"chevron-down\"\n                variant=\"primary\"\n                class=\"arrows\"\n              ></ix-icon-button>\n            </div>\n          </div>\n          <div class={{ button: true, hidden: !this.standaloneAppearance }}>\n            <ix-button\n              onClick={() => {\n                this.timeSelect.emit(this._time.toFormat(this.format));\n                this.done.emit(this._time.toFormat(this.format));\n              }}\n            >\n              {this.textSelectTime}\n            </ix-button>\n          </div>\n        </ix-date-time-card>\n      </Host>\n    );\n  }\n}\n"],"mappings":"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"}