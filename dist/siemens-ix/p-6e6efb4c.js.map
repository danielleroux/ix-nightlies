{"version":3,"names":["DefaultFrameworkDelegate","attachView","view","config","attachToElement","_a","parentElement","document","body","appendChild","removeView","remove","coreDelegate","currentDelegate","registerFrameworkDelegate","delegate","resolveDelegate","getCoreDelegate","setA11yAttributes","element","ariaDescribedby","ariaLabelledby","setAttribute","createConfirmButtons","textOkay","textCancel","payloadOkay","payloadCancel","actions","undefined","id","text","type","payload","async","showMessage","onMessageAction","TypedEvent","dialog","createElement","header","content","footer","Object","assign","innerText","messageTitle","message","forEach","button","variant","addEventListener","closeModal","actionId","outline","dismissModal","dialogRef","event","emit","detail","showModal","info","title","icon","warning","iconColor","error","success","question","getIxModal","closest","closeResult","dismissResult","onClose","onDismiss","HTMLElement","tagName","htmlElement"],"sources":["src/components/utils/delegate.ts","src/components/utils/modal/message.ts","src/components/utils/modal/modal.ts"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2023 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nexport type DelegateConfig = {\n  parentElement?: Element;\n};\n\nexport interface FrameworkDelegate {\n  attachView<R = HTMLElement>(view: any, config?: DelegateConfig): Promise<R>;\n  removeView(view: any): Promise<void>;\n}\n\nclass DefaultFrameworkDelegate implements FrameworkDelegate {\n  async attachView<R = HTMLElement>(\n    view: any,\n    config?: DelegateConfig\n  ): Promise<R> {\n    const attachToElement = config?.parentElement ?? document.body;\n    attachToElement.appendChild(view);\n    return view;\n  }\n\n  async removeView(view: any) {\n    view.remove();\n  }\n}\n\nconst coreDelegate = new DefaultFrameworkDelegate();\nlet currentDelegate: FrameworkDelegate = coreDelegate;\n\nexport function registerFrameworkDelegate(delegate: FrameworkDelegate) {\n  currentDelegate = delegate;\n}\n\nexport const resolveDelegate = () => {\n  return currentDelegate;\n};\n\nexport const getCoreDelegate = () => coreDelegate;\n","/*\n * SPDX-FileCopyrightText: 2023 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { getCoreDelegate } from '../delegate';\nimport { TypedEvent } from '../typed-event';\n\nfunction setA11yAttributes(element: HTMLElement, config: MessageContent) {\n  const ariaDescribedby = config.ariaDescribedby;\n  const ariaLabelledby = config.ariaLabelledby;\n\n  delete config['ariaDescribedby'];\n  delete config['ariaLabelledby'];\n\n  if (ariaDescribedby) {\n    element.setAttribute('aria-describedby', ariaDescribedby);\n  }\n\n  if (ariaLabelledby) {\n    element.setAttribute('aria-labelledby', ariaLabelledby);\n  }\n}\n\nfunction createConfirmButtons(\n  textOkay: string,\n  textCancel?: string,\n  payloadOkay?: any,\n  payloadCancel?: any\n) {\n  let actions = [];\n  if (textCancel !== undefined) {\n    actions = [\n      ...actions,\n      {\n        id: 'cancel',\n        text: textCancel,\n        type: 'cancel',\n        payload: payloadCancel,\n      },\n    ];\n  }\n  return [\n    ...actions,\n    {\n      id: 'okay',\n      text: textOkay,\n      type: 'okay',\n      payload: payloadOkay,\n    },\n  ];\n}\n\nexport type MessageContent = {\n  icon: string;\n  iconColor?: string;\n  messageTitle: string;\n  message: string;\n  actions: {\n    id: string;\n    type: 'button-primary' | 'button-secondary' | 'okay' | 'cancel';\n    text: string;\n    payload?: any;\n  }[];\n  ariaLabelledby?: string;\n  ariaDescribedby?: string;\n};\n\nexport async function showMessage<T>(config: MessageContent) {\n  const onMessageAction = new TypedEvent<{\n    actionId: string;\n    payload: T;\n  }>();\n  const dialog = document.createElement('ix-modal');\n  const header = document.createElement('ix-modal-header');\n  const content = document.createElement('ix-modal-content');\n  const footer = document.createElement('ix-modal-footer');\n\n  setA11yAttributes(dialog, config);\n\n  Object.assign(header, config);\n  Object.assign(content, config);\n  Object.assign(footer, config);\n\n  header.innerText = config.messageTitle;\n  content.innerText = config.message;\n\n  config.actions.forEach(({ id, text, type, payload }) => {\n    const button = document.createElement('ix-button');\n    button.innerText = text;\n    footer.appendChild(button);\n\n    if (type === 'okay') {\n      button.variant = 'primary';\n      button.addEventListener('click', () =>\n        dialog.closeModal({\n          actionId: id,\n          payload,\n        })\n      );\n      return;\n    }\n    if (type === 'cancel') {\n      button.variant = 'primary';\n      button.outline = true;\n      button.addEventListener('click', () =>\n        dialog.dismissModal({\n          actionId: id,\n          payload,\n        })\n      );\n      return;\n    }\n  });\n\n  dialog.appendChild(header);\n  dialog.appendChild(content);\n  dialog.appendChild(footer);\n\n  const dialogRef =\n    await getCoreDelegate().attachView<HTMLIxModalElement>(dialog);\n\n  dialogRef.addEventListener(\n    'dialogClose',\n    (\n      event: CustomEvent<{\n        actionId: string;\n        payload: T;\n      }>\n    ) => {\n      onMessageAction.emit(event.detail);\n      dialogRef.remove();\n    }\n  );\n\n  dialogRef.addEventListener(\n    'dialogDismiss',\n    (\n      event: CustomEvent<{\n        actionId: string;\n        payload: T;\n      }>\n    ) => {\n      onMessageAction.emit(event.detail);\n      dialogRef.remove();\n    }\n  );\n\n  dialogRef.showModal();\n  return onMessageAction;\n}\n\nshowMessage.info = (\n  title: string,\n  message: string,\n  textOkay: string,\n  textCancel?: string,\n  payloadOkay?: any,\n  payloadCancel?: any\n) => {\n  return showMessage({\n    message,\n    messageTitle: title,\n    icon: 'info',\n    actions: createConfirmButtons(\n      textOkay,\n      textCancel,\n      payloadOkay,\n      payloadCancel\n    ),\n  });\n};\n\nshowMessage.warning = (\n  title: string,\n  message: string,\n  textOkay: string,\n  textCancel?: string,\n  payloadOkay?: any,\n  payloadCancel?: any\n) => {\n  return showMessage({\n    message,\n    messageTitle: title,\n    icon: 'warning',\n    iconColor: 'color-warning',\n    actions: createConfirmButtons(\n      textOkay,\n      textCancel,\n      payloadOkay,\n      payloadCancel\n    ),\n  });\n};\n\nshowMessage.error = (\n  title: string,\n  message: string,\n  textOkay: string,\n  textCancel?: string,\n  payloadOkay?: any,\n  payloadCancel?: any\n) => {\n  return showMessage({\n    message,\n    messageTitle: title,\n    icon: 'error',\n    iconColor: 'color-alarm',\n    actions: createConfirmButtons(\n      textOkay,\n      textCancel,\n      payloadOkay,\n      payloadCancel\n    ),\n  });\n};\n\nshowMessage.success = (\n  title: string,\n  message: string,\n  textOkay: string,\n  textCancel?: string,\n  payloadOkay?: any,\n  payloadCancel?: any\n) => {\n  return showMessage({\n    message,\n    messageTitle: title,\n    icon: 'success',\n    iconColor: 'color-success',\n    actions: createConfirmButtons(\n      textOkay,\n      textCancel,\n      payloadOkay,\n      payloadCancel\n    ),\n  });\n};\n\nshowMessage.question = (\n  title: string,\n  message: string,\n  textOkay: string,\n  textCancel?: string,\n  payloadOkay?: any,\n  payloadCancel?: any\n) => {\n  return showMessage({\n    message,\n    messageTitle: title,\n    icon: 'question',\n    actions: createConfirmButtons(\n      textOkay,\n      textCancel,\n      payloadOkay,\n      payloadCancel\n    ),\n  });\n};\n","/*\n * SPDX-FileCopyrightText: 2023 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { IxModalSize } from '../../modal/modal';\nimport { getCoreDelegate, resolveDelegate } from '../delegate';\nimport { TypedEvent } from '../typed-event';\n\nexport function setA11yAttributes(element: HTMLElement, config: ModalConfig) {\n  const ariaDescribedby = config.ariaDescribedby;\n  const ariaLabelledby = config.ariaLabelledby;\n\n  delete config['ariaDescribedby'];\n  delete config['ariaLabelledby'];\n\n  if (ariaDescribedby) {\n    element.setAttribute('aria-describedby', ariaDescribedby);\n  }\n\n  if (ariaLabelledby) {\n    element.setAttribute('aria-labelledby', ariaLabelledby);\n  }\n}\n\nexport interface ModalConfig<TReason = any, CONTENT = any> {\n  animation?: boolean;\n  ariaDescribedby?: string;\n  ariaLabelledby?: string;\n  backdrop?: boolean;\n  closeOnBackdropClick?: boolean;\n  beforeDismiss?: (reason?: TReason) => boolean | Promise<boolean>;\n  centered?: boolean;\n  container?: string | HTMLElement;\n  content: CONTENT | string;\n  keyboard?: boolean;\n  size?: IxModalSize;\n  title?: string;\n}\n\nexport interface ModalInstance<TReason = any> {\n  htmlElement: HTMLIxModalElement;\n  onClose: TypedEvent<TReason>;\n  onDismiss: TypedEvent<TReason>;\n}\n\nfunction getIxModal(element: Element) {\n  return element.closest('ix-modal');\n}\n\nexport function closeModal<TClose = any>(\n  element: Element,\n  closeResult: TClose\n) {\n  const dialog = getIxModal(element);\n  if (dialog) {\n    dialog.closeModal(closeResult);\n    return;\n  }\n}\n\nexport function dismissModal(element: Element, dismissResult?: any) {\n  const dialog = getIxModal(element);\n  if (dialog) {\n    dialog.dismissModal(dismissResult);\n    return;\n  }\n}\n\nexport async function showModal<T>(\n  config: ModalConfig<T>\n): Promise<ModalInstance<T>> {\n  const delegate = resolveDelegate();\n  let dialogRef: HTMLIxModalElement;\n  const onClose = new TypedEvent<T>();\n  const onDismiss = new TypedEvent<T>();\n\n  if (typeof config.content === 'string') {\n    const dialog = document.createElement('ix-modal');\n    dialog.innerText = config.content;\n    dialogRef = await getCoreDelegate().attachView(dialog);\n  }\n\n  if (\n    config.content instanceof HTMLElement &&\n    config.content.tagName !== 'IX-MODAL'\n  ) {\n    const dialog = document.createElement('ix-modal');\n    dialog.appendChild(config.content);\n    dialogRef = await getCoreDelegate().attachView(dialog);\n  }\n  if (!dialogRef) {\n    dialogRef = await delegate.attachView<HTMLIxModalElement>(config.content);\n  }\n\n  setA11yAttributes(dialogRef, config);\n  Object.assign(dialogRef, config);\n\n  await dialogRef.showModal();\n  dialogRef.addEventListener('dialogClose', async ({ detail }: CustomEvent) => {\n    onClose.emit(detail);\n    await delegate.removeView(dialogRef);\n  });\n\n  dialogRef.addEventListener(\n    'dialogDismiss',\n    async ({ detail }: CustomEvent) => {\n      onDismiss.emit(detail);\n      await delegate.removeView(dialogRef);\n    }\n  );\n\n  return {\n    htmlElement: dialogRef,\n    onClose,\n    onDismiss,\n  };\n}\n"],"mappings":"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"}