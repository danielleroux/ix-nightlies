import{r as t,h as e,H as i,g as s}from"./p-3b388d55.js";import{a as o,c as r,s as n,o as a,b as l,f as h}from"./p-b3f35666.js";import{O as c}from"./p-a969587b.js";const d=':host{display:inline-block;position:fixed;left:0px;top:0px;z-index:var(--theme-z-index-tooltip);max-width:18.25rem;opacity:0;visibility:collapse !important;overflow-wrap:break-word;border-radius:0.25rem;background-color:var(--theme-tootlip--background);padding:0.375rem 0.75rem 0.375rem 0.875rem;box-shadow:var(--theme-shadow-4)}:host .tooltip-title{display:flex;align-items:center}:host .tooltip-title ::slotted(ix-icon){margin-right:0.35rem}:host(.visible){opacity:1;visibility:visible !important}:host(.visible) .arrow,:host(.visible) .arrow::before{position:absolute;width:8px;height:8px;background:inherit}:host(.visible) .arrow{visibility:hidden}:host(.visible) .arrow::before{visibility:visible;content:"";transform:rotate(45deg);background-color:var(--theme-tootlip--background)}';const f=d;var u=undefined&&undefined.__decorate||function(t,e,i,s){var o=arguments.length,r=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,i):s,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)if(n=t[a])r=(o<3?n(r):o>3?n(e,i,r):n(e,i))||r;return o>3&&r&&Object.defineProperty(e,i,r),r};const p=t=>t!=null?`${t}px`:"";const b=class{constructor(e){t(this,e);this.onEnterElementBind=this.onTooltipShow.bind(this);this.onLeaveElementBind=this.onTooltipHide.bind(this);this.tooltipCloseTimeInMS=50;this.for=undefined;this.titleContent=undefined;this.interactive=false;this.placement="top";this.animationFrame=false;this.visible=false}get arrowElement(){return this.hostElement.shadowRoot.querySelector(".arrow")}destroyAutoUpdate(){if(this.disposeAutoUpdate!==undefined){this.disposeAutoUpdate()}}onTooltipShow(t){this.showTooltip(t.target)}onTooltipHide(){this.hideTooltip()}async showTooltip(t){clearTimeout(this.hideTooltipTimeout);await this.computeTooltipPosition(t);this.visible=true}async hideTooltip(){this.hideTooltipTimeout=setTimeout((()=>{this.visible=false}),this.tooltipCloseTimeInMS);this.destroyAutoUpdate()}computeArrowPosition({placement:t,middlewareData:e}){let{x:i,y:s}=e.arrow;if(t.startsWith("top")){return{left:p(i),top:p(s)}}if(t.startsWith("right")){return{left:p(-4),top:p(s)}}if(t.startsWith("bottom")){return{left:p(i),top:p(-4)}}if(t.startsWith("left")){return{right:p(-4),top:p(s)}}}async computeTooltipPosition(t){if(!t){return}return new Promise((e=>{this.disposeAutoUpdate=o(t,this.hostElement,(async()=>{setTimeout((async()=>{const i=await r(t,this.hostElement,{strategy:"fixed",placement:this.placement,middleware:[n(),a(8),l({element:this.arrowElement}),h({fallbackStrategy:"initialPlacement",padding:10})]});if(i.middlewareData.arrow){const t=this.computeArrowPosition(i);Object.assign(this.arrowElement.style,t)}const{x:s,y:o}=i;Object.assign(this.hostElement.style,{left:s!==null?`${s}px`:"",top:o!==null?`${o}px`:""});e()}))}),{ancestorResize:true,ancestorScroll:true,elementResize:true,animationFrame:this.animationFrame})}))}clearHideTimeout(){if(this.interactive){clearTimeout(this.hideTooltipTimeout)}}queryAnchorElements(){return Array.from(document.querySelectorAll(this.for))}registerTriggerListener(){const t=this.queryAnchorElements();if(this.disposeListener){this.disposeListener()}t.forEach((t=>{t.addEventListener("mouseenter",this.onEnterElementBind);t.addEventListener("mouseleave",this.onLeaveElementBind);t.addEventListener("focusin",this.onEnterElementBind);t.addEventListener("focusout",this.onLeaveElementBind);this.disposeListener=()=>{t.removeEventListener("mouseenter",this.onEnterElementBind);t.removeEventListener("mouseleave",this.onLeaveElementBind);t.removeEventListener("focusin",this.onEnterElementBind);t.removeEventListener("focusout",this.onLeaveElementBind)}}))}registerTooltipListener(){const{hostElement:t}=this;t.addEventListener("mouseenter",(()=>this.clearHideTimeout()));t.addEventListener("focusin",(()=>this.clearHideTimeout()));t.addEventListener("mouseleave",(()=>this.onTooltipHide()));t.addEventListener("focusout",(()=>this.onTooltipHide()))}async onKeydown(t){if(t.code==="Escape"){this.onTooltipHide()}}componentWillLoad(){this.registerTriggerListener()}componentDidLoad(){if(this.interactive){this.tooltipCloseTimeInMS=150}this.observer=new MutationObserver((()=>{this.registerTriggerListener()}));this.observer.observe(document.body,{attributes:true,attributeFilter:["data-ix-tooltip"],childList:true,subtree:true});this.registerTooltipListener()}disconnectedCallback(){var t;(t=this.observer)===null||t===void 0?void 0:t.disconnect();this.destroyAutoUpdate()}render(){const t={"tooltip-content":true};return e(i,{key:"8f85f75338cc78b38c6090fb75c9623123894a19",class:{visible:this.visible},role:"tooltip"},e("div",{key:"875b514167bfe9f7186c86d2a746e16c4425d833",class:"tooltip-title"},e("slot",{key:"0cd77bf05e8dfd1a37d71b44f66eed1847743856",name:"title-icon"}),e("ix-typography",{key:"50db3d851852796ba8bd247eefd10d7c9d3920a3",variant:"default-title"},this.titleContent,e("slot",{key:"5b26a7a70f46036fc7f041b7d2f8a6742dc92cf4",name:"title-content"}))),e("div",{key:"6b161d389cae7f6e30ee047d78cfb90bd6f70b4e",class:t},e("slot",{key:"3c1b118a9ee09de941547d5171d8201f1d76e739"})),e("div",{key:"269cb211d6c4005e17eb2710f999e8390cd91236",class:"arrow"}))}get hostElement(){return s(this)}};u([c("keydown",(t=>t.visible))],b.prototype,"onKeydown",null);b.style=f;export{b as ix_tooltip};
//# sourceMappingURL=p-61a8fbef.entry.js.map