import{r as t,h as e,H as i,g as s}from"./p-26e9d40e.js";import{a as o,c as a,s as r,o as n,b as l,f as h}from"./p-b3f35666.js";import{O as c}from"./p-ced10144.js";const d=':host{display:inline-block;position:fixed;left:0px;top:0px;z-index:var(--theme-z-index-tooltip);max-width:18.25rem;opacity:0;visibility:collapse !important;overflow-wrap:break-word;border-radius:0.25rem;background-color:var(--theme-tootlip--background);padding:0.375rem 0.75rem 0.375rem 0.875rem;box-shadow:var(--theme-shadow-4)}:host .tooltip-title{display:flex;align-items:center}:host .tooltip-title ::slotted(ix-icon){margin-right:0.35rem}:host(.visible){opacity:1;visibility:visible !important}:host(.visible) .arrow,:host(.visible) .arrow::before{position:absolute;width:8px;height:8px;background:inherit}:host(.visible) .arrow{visibility:hidden}:host(.visible) .arrow::before{visibility:visible;content:"";transform:rotate(45deg);background-color:var(--theme-tootlip--background)}';const f=d;var u=undefined&&undefined.__decorate||function(t,e,i,s){var o=arguments.length,a=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,i):s,r;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(t,e,i,s);else for(var n=t.length-1;n>=0;n--)if(r=t[n])a=(o<3?r(a):o>3?r(e,i,a):r(e,i))||a;return o>3&&a&&Object.defineProperty(e,i,a),a};const p=t=>t!=null?`${t}px`:"";const m=class{constructor(e){t(this,e);this.onEnterElementBind=this.onTooltipShow.bind(this);this.onLeaveElementBind=this.onTooltipHide.bind(this);this.tooltipCloseTimeInMS=50;this.for=undefined;this.titleContent=undefined;this.interactive=false;this.placement="top";this.animationFrame=false;this.visible=false}get arrowElement(){return this.hostElement.shadowRoot.querySelector(".arrow")}destroyAutoUpdate(){if(this.disposeAutoUpdate!==undefined){this.disposeAutoUpdate()}}onTooltipShow(t){this.showTooltip(t.target)}onTooltipHide(){this.hideTooltip()}async showTooltip(t){clearTimeout(this.hideTooltipTimeout);await this.computeTooltipPosition(t);this.visible=true}async hideTooltip(){this.hideTooltipTimeout=setTimeout((()=>{this.visible=false}),this.tooltipCloseTimeInMS);this.destroyAutoUpdate()}computeArrowPosition({placement:t,middlewareData:e}){let{x:i,y:s}=e.arrow;if(t.startsWith("top")){return{left:p(i),top:p(s)}}if(t.startsWith("right")){return{left:p(-4),top:p(s)}}if(t.startsWith("bottom")){return{left:p(i),top:p(-4)}}if(t.startsWith("left")){return{right:p(-4),top:p(s)}}}async computeTooltipPosition(t){if(!t){return}return new Promise((e=>{this.disposeAutoUpdate=o(t,this.hostElement,(async()=>{setTimeout((async()=>{const i=await a(t,this.hostElement,{strategy:"fixed",placement:this.placement,middleware:[r(),n(8),l({element:this.arrowElement}),h({fallbackStrategy:"initialPlacement",padding:10})]});if(i.middlewareData.arrow){const t=this.computeArrowPosition(i);Object.assign(this.arrowElement.style,t)}const{x:s,y:o}=i;Object.assign(this.hostElement.style,{left:s!==null?`${s}px`:"",top:o!==null?`${o}px`:""});e()}))}),{ancestorResize:true,ancestorScroll:true,elementResize:true,animationFrame:this.animationFrame})}))}clearHideTimeout(){if(this.interactive){clearTimeout(this.hideTooltipTimeout)}}queryAnchorElements(){return Array.from(document.querySelectorAll(this.for))}registerTriggerListener(){const t=this.queryAnchorElements();if(this.disposeListener){this.disposeListener()}t.forEach((t=>{t.addEventListener("mouseenter",this.onEnterElementBind);t.addEventListener("mouseleave",this.onLeaveElementBind);t.addEventListener("focusin",this.onEnterElementBind);t.addEventListener("focusout",this.onLeaveElementBind);this.disposeListener=()=>{t.removeEventListener("mouseenter",this.onEnterElementBind);t.removeEventListener("mouseleave",this.onLeaveElementBind);t.removeEventListener("focusin",this.onEnterElementBind);t.removeEventListener("focusout",this.onLeaveElementBind)}}))}registerTooltipListener(){const{hostElement:t}=this;t.addEventListener("mouseenter",(()=>this.clearHideTimeout()));t.addEventListener("focusin",(()=>this.clearHideTimeout()));t.addEventListener("mouseleave",(()=>this.onTooltipHide()));t.addEventListener("focusout",(()=>this.onTooltipHide()))}async onKeydown(t){if(t.code==="Escape"){this.onTooltipHide()}}componentWillLoad(){this.registerTriggerListener()}componentDidLoad(){if(this.interactive){this.tooltipCloseTimeInMS=150}this.observer=new MutationObserver((()=>{this.registerTriggerListener()}));this.observer.observe(document.body,{attributes:true,attributeFilter:["data-ix-tooltip"],childList:true,subtree:true});this.registerTooltipListener()}disconnectedCallback(){var t;(t=this.observer)===null||t===void 0?void 0:t.disconnect();this.destroyAutoUpdate()}render(){const t={"tooltip-content":true};return e(i,{key:"c297ba0961f7dc7ad8823f4f9a5022cb10ed7a77",class:{visible:this.visible},role:"tooltip"},e("div",{key:"21bf5211c142329a9475ef37fb5d2b5f5e4f5f19",class:"tooltip-title"},e("slot",{key:"8e4b3e91a0a161efa871a717a3d4871cb08224d2",name:"title-icon"}),e("ix-typography",{key:"7715a464de0154206a72f3a9ed97247eb5e4954c",variant:"default-title"},this.titleContent,e("slot",{key:"16cc59a0d2a7aa11ab584be7738084b811d2320d",name:"title-content"}))),e("div",{key:"4390c36d7d326a7a0ffd8e0a7f2308c6bdacd02b",class:t},e("slot",{key:"b21343921ee51073ad3c7e26f1ace94f46ec29e3"})),e("div",{key:"4e578ce3e101c8b479a7c334a81dafde3dc105a5",class:"arrow"}))}get hostElement(){return s(this)}};u([c("keydown",(t=>t.visible))],m.prototype,"onKeydown",null);m.style=f;export{m as ix_tooltip};
//# sourceMappingURL=p-1cc49ed9.entry.js.map