{"version":3,"names":["workflowStepsCss","IxWorkflowStepsStyle0","WorkflowSteps","getSteps","Array","from","this","hostElement","querySelectorAll","updateSteps","steps","forEach","element","index","vertical","clickable","selected","selectedIndex","length","position","onStepSelectionChanged","event","eventTarget","detail","clickIndex","findIndex","step","clientEvent","stepSelected","emit","defaultPrevented","componentDidLoad","observer","createMutationObserver","mutations","mutation","type","observe","childList","disconnectedCallback","disconnect","componentDidRender","render","h","Host","key","class"],"sources":["src/components/workflow-steps/workflow-steps.scss?tag=ix-workflow-steps&encapsulation=shadow","src/components/workflow-steps/workflow-steps.tsx"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2023 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n@import 'common-variables';\n@import 'mixins/shadow-dom/component';\n\n:host {\n  @include ix-component;\n\n  .steps {\n    display: flex;\n\n    &.vertical {\n      display: block;\n    }\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2023 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Listen,\n  Prop,\n} from '@stencil/core';\nimport { createMutationObserver } from '../utils/mutation-observer';\n\n@Component({\n  tag: 'ix-workflow-steps',\n  styleUrl: 'workflow-steps.scss',\n  shadow: true,\n})\nexport class WorkflowSteps {\n  @Element() hostElement!: HTMLIxWorkflowStepsElement;\n\n  /**\n   * Select orientation\n   */\n  @Prop() vertical: boolean = false;\n\n  /**\n   * Activate navigation click\n   */\n  @Prop() clickable: boolean = false;\n\n  /**\n   * Activate navigation click\n   */\n  @Prop() selectedIndex: number = 0;\n\n  /**\n   * On step selected event\n   */\n  @Event() stepSelected: EventEmitter<number>;\n\n  private getSteps() {\n    return Array.from(this.hostElement.querySelectorAll('ix-workflow-step'));\n  }\n\n  updateSteps() {\n    let steps = this.getSteps();\n    steps.forEach((element, index) => {\n      element.vertical = this.vertical;\n      element.clickable = this.clickable;\n      element.selected = this.selectedIndex === index;\n\n      if (steps.length === 1) {\n        element.position = 'single';\n        return;\n      }\n\n      if (index === 0) {\n        element.position = 'first';\n      } else if (index === steps.length - 1) {\n        element.position = 'last';\n      } else {\n        element.position = 'undefined';\n      }\n    });\n  }\n\n  private observer: MutationObserver;\n\n  @Listen('selectedChanged')\n  onStepSelectionChanged(event: CustomEvent<HTMLIxWorkflowStepElement>) {\n    const eventTarget = event.detail;\n\n    const steps = this.getSteps();\n    const clickIndex = steps.findIndex((step) => step === eventTarget);\n    const clientEvent = this.stepSelected.emit(clickIndex);\n\n    if (clientEvent.defaultPrevented) {\n      return;\n    }\n\n    steps.forEach((step, index) => {\n      step.selected = index === clickIndex;\n    });\n  }\n\n  componentDidLoad() {\n    this.observer = createMutationObserver((mutations) => {\n      for (let mutation of mutations) {\n        if (mutation.type === 'childList') {\n          this.updateSteps();\n        }\n      }\n    });\n\n    this.observer.observe(this.hostElement, { childList: true });\n  }\n\n  disconnectedCallback() {\n    if (this.observer) {\n      this.observer.disconnect();\n    }\n  }\n\n  componentDidRender() {\n    this.updateSteps();\n  }\n\n  render() {\n    return (\n      <Host>\n        <div class={{ steps: true, vertical: this.vertical }}>\n          <slot></slot>\n        </div>\n      </Host>\n    );\n  }\n}\n"],"mappings":"oGAAA,MAAMA,EAAmB,oqBACzB,MAAAC,EAAeD,E,MCyBFE,EAAa,M,kFAMI,M,eAKC,M,mBAKG,C,CAOxB,QAAAC,GACN,OAAOC,MAAMC,KAAKC,KAAKC,YAAYC,iBAAiB,oB,CAGtD,WAAAC,GACE,IAAIC,EAAQJ,KAAKH,WACjBO,EAAMC,SAAQ,CAACC,EAASC,KACtBD,EAAQE,SAAWR,KAAKQ,SACxBF,EAAQG,UAAYT,KAAKS,UACzBH,EAAQI,SAAWV,KAAKW,gBAAkBJ,EAE1C,GAAIH,EAAMQ,SAAW,EAAG,CACtBN,EAAQO,SAAW,SACnB,M,CAGF,GAAIN,IAAU,EAAG,CACfD,EAAQO,SAAW,O,MACd,GAAIN,IAAUH,EAAMQ,OAAS,EAAG,CACrCN,EAAQO,SAAW,M,KACd,CACLP,EAAQO,SAAW,W,KAQzB,sBAAAC,CAAuBC,GACrB,MAAMC,EAAcD,EAAME,OAE1B,MAAMb,EAAQJ,KAAKH,WACnB,MAAMqB,EAAad,EAAMe,WAAWC,GAASA,IAASJ,IACtD,MAAMK,EAAcrB,KAAKsB,aAAaC,KAAKL,GAE3C,GAAIG,EAAYG,iBAAkB,CAChC,M,CAGFpB,EAAMC,SAAQ,CAACe,EAAMb,KACnBa,EAAKV,SAAWH,IAAUW,CAAU,G,CAIxC,gBAAAO,GACEzB,KAAK0B,SAAWC,GAAwBC,IACtC,IAAK,IAAIC,KAAYD,EAAW,CAC9B,GAAIC,EAASC,OAAS,YAAa,CACjC9B,KAAKG,a,MAKXH,KAAK0B,SAASK,QAAQ/B,KAAKC,YAAa,CAAE+B,UAAW,M,CAGvD,oBAAAC,GACE,GAAIjC,KAAK0B,SAAU,CACjB1B,KAAK0B,SAASQ,Y,EAIlB,kBAAAC,GACEnC,KAAKG,a,CAGP,MAAAiC,GACE,OACEC,EAACC,EAAI,CAAAC,IAAA,4CACHF,EAAA,OAAAE,IAAA,2CAAKC,MAAO,CAAEpC,MAAO,KAAMI,SAAUR,KAAKQ,WACxC6B,EAAA,QAAAE,IAAA,8C"}