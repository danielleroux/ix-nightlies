{"version":3,"names":["TypedEvent","constructor","this","listeners","listenersOncer","on","listener","push","dispose","off","once","callbackIndex","indexOf","splice","emit","event","forEach","length","toCall","pipe","te","e"],"sources":["src/components/utils/typed-event.ts"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2023 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nexport interface Listener<T> {\n  (event: T): any;\n}\n\nexport interface Disposable {\n  dispose(): void;\n}\n\nexport class TypedEvent<T> {\n  public readonly listeners: Listener<T>[] = [];\n  public listenersOncer: Listener<T>[] = [];\n\n  on = (listener: Listener<T>): Disposable => {\n    this.listeners.push(listener);\n    return {\n      dispose: () => this.off(listener),\n    };\n  };\n\n  once = (listener: Listener<T>): void => {\n    this.listenersOncer.push(listener);\n  };\n\n  off = (listener: Listener<T>) => {\n    const callbackIndex = this.listeners.indexOf(listener);\n    if (callbackIndex > -1) {\n      this.listeners.splice(callbackIndex, 1);\n    }\n  };\n\n  emit = (event: T) => {\n    /** Update any general listeners */\n    this.listeners.forEach((listener) => listener(event));\n\n    /** Clear the `once` queue */\n    if (this.listenersOncer.length > 0) {\n      const toCall = this.listenersOncer;\n      this.listenersOncer = [];\n      toCall.forEach((listener) => listener(event));\n    }\n  };\n\n  pipe = (te: TypedEvent<T>): Disposable => {\n    return this.on((e) => te.emit(e));\n  };\n}\n"],"mappings":"MAiBaA,EAAb,WAAAC,GACkBC,KAAAC,UAA2B,GACpCD,KAAAE,eAAgC,GAEvCF,KAAAG,GAAMC,IACJJ,KAAKC,UAAUI,KAAKD,GACpB,MAAO,CACLE,QAAS,IAAMN,KAAKO,IAAIH,GACzB,EAGHJ,KAAAQ,KAAQJ,IACNJ,KAAKE,eAAeG,KAAKD,EAAS,EAGpCJ,KAAAO,IAAOH,IACL,MAAMK,EAAgBT,KAAKC,UAAUS,QAAQN,GAC7C,GAAIK,GAAiB,EAAG,CACtBT,KAAKC,UAAUU,OAAOF,EAAe,E,GAIzCT,KAAAY,KAAQC,IAENb,KAAKC,UAAUa,SAASV,GAAaA,EAASS,KAG9C,GAAIb,KAAKE,eAAea,OAAS,EAAG,CAClC,MAAMC,EAAShB,KAAKE,eACpBF,KAAKE,eAAiB,GACtBc,EAAOF,SAASV,GAAaA,EAASS,I,GAI1Cb,KAAAiB,KAAQC,GACClB,KAAKG,IAAIgB,GAAMD,EAAGN,KAAKO,I"}