import{r as t,h as e,H as i,g as s}from"./p-3b388d55.js";import{a as o,c as r,s as a,o as n,b as l,f as c}from"./p-b3f35666.js";import{O as h}from"./p-a969587b.js";const d=':host{display:inline-block;position:fixed;left:0px;top:0px;z-index:var(--theme-z-index-tooltip);max-width:18.25rem;opacity:0;visibility:collapse !important;overflow-wrap:break-word;border-radius:0.25rem;background-color:var(--theme-tootlip--background);padding:0.375rem 0.75rem 0.375rem 0.875rem;box-shadow:var(--theme-shadow-4)}:host .tooltip-title{display:flex;align-items:center}:host .tooltip-title ::slotted(ix-icon){margin-right:0.35rem}:host(.visible){opacity:1;visibility:visible !important}:host(.visible) .arrow,:host(.visible) .arrow::before{position:absolute;width:8px;height:8px;background:inherit}:host(.visible) .arrow{visibility:hidden}:host(.visible) .arrow::before{visibility:visible;content:"";transform:rotate(45deg);background-color:var(--theme-tootlip--background)}';const f=d;var u=undefined&&undefined.__decorate||function(t,e,i,s){var o=arguments.length,r=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,i):s,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(t,e,i,s);else for(var n=t.length-1;n>=0;n--)if(a=t[n])r=(o<3?a(r):o>3?a(e,i,r):a(e,i))||r;return o>3&&r&&Object.defineProperty(e,i,r),r};const b=t=>t!=null?`${t}px`:"";const p=class{constructor(e){t(this,e);this.onEnterElementBind=this.onTooltipShow.bind(this);this.onLeaveElementBind=this.onTooltipHide.bind(this);this.tooltipCloseTimeInMS=50;this.for=undefined;this.titleContent=undefined;this.interactive=false;this.placement="top";this.animationFrame=false;this.visible=false}get arrowElement(){return this.hostElement.shadowRoot.querySelector(".arrow")}destroyAutoUpdate(){if(this.disposeAutoUpdate!==undefined){this.disposeAutoUpdate()}}onTooltipShow(t){this.showTooltip(t.target)}onTooltipHide(){this.hideTooltip()}async showTooltip(t){clearTimeout(this.hideTooltipTimeout);await this.computeTooltipPosition(t);this.visible=true}async hideTooltip(){this.hideTooltipTimeout=setTimeout((()=>{this.visible=false}),this.tooltipCloseTimeInMS);this.destroyAutoUpdate()}computeArrowPosition({placement:t,middlewareData:e}){let{x:i,y:s}=e.arrow;if(t.startsWith("top")){return{left:b(i),top:b(s)}}if(t.startsWith("right")){return{left:b(-4),top:b(s)}}if(t.startsWith("bottom")){return{left:b(i),top:b(-4)}}if(t.startsWith("left")){return{right:b(-4),top:b(s)}}}async computeTooltipPosition(t){if(!t){return}return new Promise((e=>{this.disposeAutoUpdate=o(t,this.hostElement,(async()=>{setTimeout((async()=>{const i=await r(t,this.hostElement,{strategy:"fixed",placement:this.placement,middleware:[a(),n(8),l({element:this.arrowElement}),c({fallbackStrategy:"initialPlacement",padding:10})]});if(i.middlewareData.arrow){const t=this.computeArrowPosition(i);Object.assign(this.arrowElement.style,t)}const{x:s,y:o}=i;Object.assign(this.hostElement.style,{left:s!==null?`${s}px`:"",top:o!==null?`${o}px`:""});e()}))}),{ancestorResize:true,ancestorScroll:true,elementResize:true,animationFrame:this.animationFrame})}))}clearHideTimeout(){if(this.interactive){clearTimeout(this.hideTooltipTimeout)}}queryAnchorElements(){return Array.from(document.querySelectorAll(this.for))}registerTriggerListener(){const t=this.queryAnchorElements();if(this.disposeListener){this.disposeListener()}t.forEach((t=>{t.addEventListener("mouseenter",this.onEnterElementBind);t.addEventListener("mouseleave",this.onLeaveElementBind);t.addEventListener("focusin",this.onEnterElementBind);t.addEventListener("focusout",this.onLeaveElementBind);this.disposeListener=()=>{t.removeEventListener("mouseenter",this.onEnterElementBind);t.removeEventListener("mouseleave",this.onLeaveElementBind);t.removeEventListener("focusin",this.onEnterElementBind);t.removeEventListener("focusout",this.onLeaveElementBind)}}))}registerTooltipListener(){const{hostElement:t}=this;t.addEventListener("mouseenter",(()=>this.clearHideTimeout()));t.addEventListener("focusin",(()=>this.clearHideTimeout()));t.addEventListener("mouseleave",(()=>this.onTooltipHide()));t.addEventListener("focusout",(()=>this.onTooltipHide()))}async onKeydown(t){if(t.code==="Escape"){this.onTooltipHide()}}componentWillLoad(){this.registerTriggerListener()}componentDidLoad(){if(this.interactive){this.tooltipCloseTimeInMS=150}this.observer=new MutationObserver((()=>{this.registerTriggerListener()}));this.observer.observe(document.body,{attributes:true,attributeFilter:["data-ix-tooltip"],childList:true,subtree:true});this.registerTooltipListener()}disconnectedCallback(){var t;(t=this.observer)===null||t===void 0?void 0:t.disconnect();this.destroyAutoUpdate()}render(){const t={"tooltip-content":true};return e(i,{key:"2dd43058c4f8ff073e4a253703be8e3930961453",class:{visible:this.visible},role:"tooltip"},e("div",{key:"332c94b629631484d4bd0087b1c6b757e3240d46",class:"tooltip-title"},e("slot",{key:"f787f67c6a64ca35896618eb64eabc5233394beb",name:"title-icon"}),e("ix-typography",{key:"cb543ead890e6fb0746506b6233f56ef319c59df",variant:"default-title"},this.titleContent,e("slot",{key:"544d764da0015b417ae7667324c3b50b476ccf20",name:"title-content"}))),e("div",{key:"07648cb88299de0c3e618d3dd239d610a5559989",class:t},e("slot",{key:"b75fcbf727c33b133430ffbe9167bb21c145c8a9"})),e("div",{key:"0486814bc106f8e3a0cea28d5384c90c2cea8a2c",class:"arrow"}))}get hostElement(){return s(this)}};u([h("keydown",(t=>t.visible))],p.prototype,"onKeydown",null);p.style=f;export{p as ix_tooltip};
//# sourceMappingURL=p-ff0799ff.entry.js.map